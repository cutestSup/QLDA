@baseUrl = http://localhost:5000/api
@token = {{login.response.body.token}} 

### Auth

# @name register
POST {{baseUrl}}/users/register
Content-Type: application/json

{
    "name": "Test User",
    "email": "test@example.com",
    "password": "password123"
}

# @name login
POST {{baseUrl}}/users/login
Content-Type: application/json

{
    "email": "test@example.com",
    "password": "password123"
}

### Calendar Management

# Create new calendar
POST {{baseUrl}}/calendar/calendars
Content-Type: application/json
Authorization: Bearer {{token}}

{
    "name": "Work Calendar",
    "color": "#4285F4",
    "description": "My work schedule",
    "time_zone": "Asia/Ho_Chi_Minh"
}

# Get all calendars
GET {{baseUrl}}/calendar/calendars
Authorization: Bearer {{token}}

### Events

# Create recurring event
POST {{baseUrl}}/events
Content-Type: application/json
Authorization: Bearer {{token}}

{
    "title": "Weekly Team Meeting",
    "description": "Regular team sync-up",
    "location": "Meeting Room 1",
    "start_time": "2025-06-05T09:00:00+07:00",
    "end_time": "2025-06-05T10:00:00+07:00",
    "is_recurring": true,
    "recurrence_rule": "FREQ=WEEKLY;BYDAY=MO;COUNT=10",
    "color": "#4285F4",
    "calendar_id": 1,
    "video_link": "https://meet.google.com/abc-defg-hij",
    "notifications": [
        { "type": "email", "minutes": 30 },
        { "type": "popup", "minutes": 10 }
    ],
    "attendees": [
        {
            "email": "colleague1@example.com",
            "optional": false
        },
        {
            "email": "colleague2@example.com",
            "optional": true
        }
    ]
}

# Create all-day event
POST {{baseUrl}}/events
Content-Type: application/json
Authorization: Bearer {{token}}

{
    "title": "Company Holiday",
    "all_day": true,
    "start_time": "2025-06-10",
    "end_time": "2025-06-10",
    "calendar_id": 1,
    "color": "#0B8043",
    "busy_status": "free"
}

### Calendar Views

# Get day view with timezone
GET {{baseUrl}}/calendar/view?type=day&start=2025-06-05&timezone=Asia/Ho_Chi_Minh
Authorization: Bearer {{token}}

# Get week view for specific calendars
GET {{baseUrl}}/calendar/view?type=week&start=2025-06-02&calendars=1,2&expandRecurring=true
Authorization: Bearer {{token}}

# Get month view grouped by date
GET {{baseUrl}}/calendar/view?type=month&start=2025-06-01&grouped=true
Authorization: Bearer {{token}}

# Get agenda view
GET {{baseUrl}}/calendar/view?type=agenda&start=2025-06-01&end=2025-07-01
Authorization: Bearer {{token}}

### Event Guest Management

# Get event guests
GET {{baseUrl}}/calendar/events/1/guests
Authorization: Bearer {{token}}

# Update guest response
PATCH {{baseUrl}}/calendar/events/1/guests/1
Content-Type: application/json
Authorization: Bearer {{token}}

{
    "response": "accepted",
    "comment": "Looking forward to it!"
}

### Free/Busy Information

# Get free/busy info
GET {{baseUrl}}/calendar/freebusy?start=2025-06-01T00:00:00Z&end=2025-06-07T23:59:59Z&calendars=1,2
Authorization: Bearer {{token}}

### Calendar Sharing

# Share calendar with another user
POST {{baseUrl}}/calendar/1/share
Content-Type: application/json
Authorization: Bearer {{token}}

{
    "email": "colleague@example.com",
    "role": "writer",
    "expiresAt": "2024-12-31T23:59:59Z"
}

# Accept calendar share invitation
@invitation_token = your_invitation_token_here
POST {{baseUrl}}/calendar/share/{{invitation_token}}/accept
Authorization: Bearer {{token}}

# Get shared calendars
GET {{baseUrl}}/calendar/shared
Authorization: Bearer {{token}}

# Update sharing settings
PUT {{baseUrl}}/calendar/1/share/1
Content-Type: application/json
Authorization: Bearer {{token}}

{
    "role": "writer",
    "notificationSettings": {
        "event_created": true,
        "event_updated": true,
        "event_deleted": false
    }
}

# Remove calendar sharing
DELETE {{baseUrl}}/calendar/1/share/1
Authorization: Bearer {{token}}

### Calendar Sync

# Get sync token
GET {{baseUrl}}/calendar/1/sync
Authorization: Bearer {{token}}

# Set your sync token here
@sync_token = your_sync_token_here

# Get calendar changes
GET {{baseUrl}}/calendar/1/changes?syncToken={{sync_token}}
Authorization: Bearer {{token}}
